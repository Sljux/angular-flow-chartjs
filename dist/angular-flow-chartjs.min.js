"use strict";function flowChartJsFactory(){function a(a,b){var c=b.chartType;if(!angular.isUndefined(c))return'<canvas class="chart chart-'+c+'" data="graphData" options="chartOptions" labels="labels" legend="legend" click="click" hover="hover" series="series" colours="colours"></canvas>'}function b(a,b,c,d){function e(){var b=s(a.valueProperties)?a.valueProperties:[a.valueProperties];return b.map(i)}function f(){return t(a.labelProperty)?(o=a.labelProperty?n.AUTO:n.NONE,a.labelProperty):r(a.labelProperty)?(o=n.PROP,i(a.labelProperty)):(o=n.NONE,!1)}function g(a){function b(a){return Array.apply(null,new Array(a)).map(String.prototype.valueOf,"")}switch(o){case n.NONE:return b(a.length);case n.AUTO:return m(Math.min(y,a.length));case n.PROP:return k(a,v,x);default:return b(a.length)}}function h(b){switch(o){case n.NONE:return"";case n.AUTO:return a.labels[a.labels.length-1]+1;case n.PROP:return l(b,v,x);default:return""}}function i(a){return a?(a=a.replace(".",".value."),["elems"].concat(a.split("."),["value"])):""}function j(a,b,c){a=a.slice(-y);for(var d=Array(b.length),e=0;e<d.length;e++)d[e]=Array(a.length);return p(a,function(a,e){p(b,function(b,f){var g=s(c)?c[f]:c;d[f][e]=l(a,b,g)})}),d}function k(a,b,c){a=a.slice(-y);var d=Array(a.length);return p(a,function(a,e){d[e]=l(a,b,c)}),d}function l(a,b,c){for(var d=0,e=b.length;e>d;++d){var f=b[d];if(!(f in a))return c;a=a[f]}return a}function m(a){for(var b=Array(a),c=0;a>c;c++)b[c]=c;return b}var n={NONE:0,AUTO:1,PROP:2};Object.freeze&&Object.freeze(n);var o,p=angular.forEach,q=angular.isDefined,r=angular.isString,s=angular.isArray,t=function(a){return a===!0||a===!1||"[object Boolean]"===toString.call(a)},u=e(),v=f(),w=q(a.valueDefaults)?a.valueDefaults:null,x=q(a.labelDefault)?a.labelDefault:null,y=d.limit;a.graphData=[],a.labels=[],a.$on("flowChart:init",function(b,c){a.graphData=j(c,u,w),a.labels=g(c)}),a.$on("flowChart:newDrop",function(b,c){a.labels.push(h(c)),p(u,function(b,d){var e=s(w)?w[d]:w;a.graphData[d].push(l(c,b,e))}),a.graphData[0].length>y&&(p(a.graphData,function(b,c){a.graphData[c]=a.graphData[c].slice(1)}),a.labels=a.labels.slice(1))})}return{restrict:"E",require:"^flowChart",template:a,scope:{chartType:"@",chartOptions:"=",valueProperties:"=",valueDefaults:"=",labelProperty:"=",labelDefault:"=",series:"=",click:"=?",hover:"=?",legend:"=",colours:"=?"},link:b}}angular.module("ngFlowChartJs",["ngFlowChart"]).directive("flowChartJs",flowChartJsFactory);