"use strict";function flowChartJsFactory(){function a(a,b){var c=b.chartType;if(!angular.isUndefined(c))return'<canvas class="chart chart-'+c+'" data="[graphData]" options="chartOptions" labels="labels" legend="legend" click="click" hover="hover" series="series" colours="colours"></canvas>'}function b(a,b,c,d){function e(a){return a?(a=a.replace(/\./,".value."),a="elems."+a+".value"):""}function f(a,b,c){return a.slice(-n).map(function(a){return g(a,b,c)})}function g(a,b,c){for(var d=b.split("."),e=0,f=d.length;f>e;++e){var g=d[e];if(!(g in a))return c;a=a[g]}return a}function h(a){for(var b=Array(a),c=0;a>c;c++)b[c]=c;return b}var i=angular.isDefined,j=e(a.valueProperty),k=e(a.labelProperty),l=i(a.valueDefault)?a.valueDefault:null,m=i(a.labelDefault)?a.labelDefault:null,n=d.limit;a.graphData=[],a.labels=[],a.$on("flowChart:init",function(b,c){a.graphData=f(c,j,l),a.labels=k?f(c,k,m):h(a.graphData.length)}),a.$on("flowChart:newDrop",function(b,c){var d=g(c,j,l),e=k?g(c,k):a.labels[a.labels.length-1]+1;a.graphData.push(d),a.labels.push(e),a.graphData.length>n&&(a.graphData.shift(),a.labels.shift())})}return{restrict:"E",require:"^flowChart",template:a,scope:{chartType:"@",chartOptions:"=",valueProperty:"=",valueDefault:"=",labelProperty:"=",labelDefault:"=",series:"=",click:"=?",hover:"=?",legend:"=",colours:"=?"},link:b}}angular.module("ngFlowChartJs",["ngFlowChart"]).directive("flowChartJs",flowChartJsFactory);